2007-10-27  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.40

	* conkeror.js (init_frame): pass `event.target' to
	dom_content_loaded_hook functions.

	* utils.js (title_format_fn): declare variable.

	* numbering.js (numbering_default): declare variable.

	* numbering.js (numbering_get_number, numbering_get_number1)
	(numbering_get_element, numbering_document_highest): new
	functions.

	* numbering.js (numbering_generate): rewrote.

	* numbering.js (numbering_simple): do not handle `embed' elements.
	exclude certain elements based on their attributes.

	* numbering.js (numbering_generate_default): new parameter, `document'.

2007-10-25  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.38

	* save.js (validateFileName): removed, and removed all calls.

	* save.js (generate_filename_safely_default)
	(generate_filename_safely_darwin, generate_filename_safely_winnt):
	new functions.

	* save.js (generate_filename_safely_fn): new variable, plus
	initialization code.

	* save.js (getDefaultFileName): use generate_filename_safely_fn.

	* interactive.js (interactive_methods.focused_link_url_s): renamed
	to focused_link_url.  updated all callers.

	* interactive.js (interactive_methods.image_url_s): renamed to
	image_url.  updated all callers.

	* interactive.js (interactive_methods.current_url_s): renamed to
	current_url.  updated all callers.

	* interactive.js (interactive_methods.current_frameset_frame_url_s):
	renamed to current_frameset_frame_url.  updated all callers.

	* interactive.js (interactive_methods.current_url_o)
	(interactive_methods.focused_link_url_o)
	(interactive_methods.image_url_o): removed.

	* save.js (save-focused-link): use `focused_link_url'.

	* save.js (save_focused_link, generate_filename, save_image): take
	string or nsIURI.

	* save.js (save-image): use `image_url'.

2007-10-25  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.37

	* frame.js (download_uri_internal): moved to save.js.

	* save.js (download_uri_internal): new argument, `post_data_o'.
	use this instead of calling getPostData.

	* save.js (download_uri_internal): moved inner function
	`getPostData' to frame.js.

	* save.js (save_focused_link, save_image, save_page)
	(save_page_as_text, save_page_complete): use
	`download_uri_internal' instead of `this.download_uri_internal'.
	updated calls to download_uri_internal to pass new argument for
	post_data_o.

	* frame.js (download_uri): updated call to download_uri_internal
	to pass new argument for post_data_o.

2007-10-25  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.36

	* save.js: new file.

	* commands.js (save_focused_link, save-focused-link, save_image)
	(save-image, save_page, save-page, save_page_as_text)
	(save-page-as-text, save_page_complete, save-page-complete): moved
	to save.js.

	* interactive.js (interactive_methods.focused_link_url_o): use
	`makeURL' instead of `this.makeURL'.

	* utils.js (make_default_file_name_to_save_url): moved to save.js.
	renamed to `generate_filename'.  rewrote.

	* save.js (maybe_get_filename_extension)
	(maybe_get_preferred_filename_extension, maybe_get_url_extension)
	(maybe_get_preferred_url_extension, getDefaultExtension)
	(getCharsetForSave, validateFileName)
	(maybe_filename_from_content_disposition, maybe_filename_from_url)
	(maybe_filename_from_document_title)
	(maybe_filename_from_url_last_directory)
	(maybe_filename_from_url_host)
	(maybe_filename_from_localization_default, getDefaultFileName):
	new functions.

2007-10-24  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.35

	* frame.js (makeURL, makeFileURL)
	(get_document_content_disposition)
	(make_default_file_name_to_save_url): move to utils.js.

	* frame.js (download_uri_internal): use conkeror.makeURL.

	* utils.js (make_default_file_name_to_save_url): use get_os
	instead of navigator.appVersion.

	* commands.js (save_focused_link, save_image, save_page)
	(save_page_as_text, save_page_complete): use
	this.download_uri_internal.

2007-10-23  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.34

	* frame.js (updateModeline): check if url is null.  build
	mode-line string in a variable.

	* interactive.js (do_interactive): try blocks around each
	interaction and callback.

2007-10-23  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.33

	* commands.js (link_menu, link-menu, renumber_links)
	(renumber-links, get_buffer_from_name, inject_css): removed.

	* commands.js (jsconsole): removed function. updated command to
	use open_url_in directly.

	* commands.js (makeFrame): renamed to make_frame_command.

	* commands.js (make-frame-command): updated.

	* commands.js (browser_next, browser_prev): use this.getBrowser.

	* commands.js (view_partial_source, view_mathml_source): use
	this.window.

	* commands.js (print_buffer): use this.window.content.

	* commands.js (view_source): use this.getWebNavigation.  use
	this.message.

	* bindings.js: remove bindings for link-menu and renumber-links.

2007-10-22  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.29

	* frame.js, interactive.js, keyboard.js, minibuffer.js,
	numbering.js: new files.

	* conkeror.js (Startup): renamed to init_frame

	* conkeror.js (delayedStartup): renamed to delayed_init_frame, and
	completely rewrote.

	* conkeror.js (log, console): removed.

	* conkeror.xml, numberedlinks.js: replaced calls to `log' with `dumpln'

	* conkeror.xul: use init_frame instead of Startup.

	* conkeror.xul: load frame.js instead of utils.js

	* conkeror.xul: use minibuffer.oninput.call

	* bindings.js (numberedlinks_kmap_predicate)
	(isearch_kmap_predicate): qualify predicate variables with
	application object.

	* bindings.js (minibuffer_kmap_predicate): check classname of
	element, because direct reference is not available in application
	scope.

	* bindings.js (input_kmap_predicate, initKmaps): current_kmap
	instead of gCurrentKmap.

	* bindings.js: call initKmaps here, to better modularize this
	file.

	* conkeror.xml: remove nsIAccessibleProvider, split-related, and
	numberedlinks-related code.

	* find.js: isearch_active now conkeror.isearch_active.

	* conkeror.js (conkeror_progress_listener)
	(conkeror_xul_browser_window): new

	* conkeror.js (init_frame): There is no try.

	* conkeror.js (init_frame): hook up conkeror_progress_listener,
	conkeror_xul_browser_window. remove appCore and appShell.  run
	make_frame_after_hook

	* conkeror.js (frame_focus_observer, nsBrowserStatusHandler)
	(top_content): removed.

	* commands.js (gCommands, gCurrentCommand): removed, and updated
	all references to conkeror.commands and conkeror.current_command.

	* commands.js (interactive_methods, do_interactive)
	(call_interactively, interactive): moved to interactive.js.

	* commands.js (add_command, beginning_of_line, end_of_line)
	(go_to_buffer): removed.

	* commands.js (switch_to_buffer, cmd_scrollTop, cmd_scrollBottom):
	rewrote.

	* commands.js (beginning-of-line, end-of-line): use
	scrollHorizComplete.

	* application.js (application.quit): moved to commands.js.

	* commands.js (show_conkeror_version, next_frameset_frame)
	(next_iframe, copy_location, yankToClipboard, goDoCommand)
	(set_mark_command): use this.message.

	* commands.js (unfocus, next_frameset_frame, next_iframe)
	(scrollHorizComplete, set_mark_command): use this.document.

	* commands.js (next_frameset_frame, next_iframe): use
	this.clearTimeout and this.setTimeout.

	* commands.js (next_frameset_frame, next_iframe): use notify.call.

	* commands.js (unfocus, next_frameset_frame, next_iframe)
	(delete_frame, renumber_links): use this.window.

	* commands.js (goBack, goForward, stopLoading, reload)
	(open_url_in, find-alternate-url, help_page, tutorial_page)
	(go_up): use this.getWebNavigation.

	* commands.js (open_url_in, switch-to-buffer, kill_buffer)
	(text_reset, text_reduce, text_enlarge): use this.getBrowser.

	* commands.js (open_url_in): use find_url_new_buffer.

	* commands.js (open_url_in): use make_frame.

	* commands.js (stopLoading, reload, open_url_in)
	(describe_bindings, help_page, tutorial_page, list_buffers): fully
	qualify nsIWebNavigation.

	* commands.js (makeFrame): use conkeror.make_frame.

	* commands.js (open_url_in_prompt, get_buffer_from_name)
	(webjump_build_url, get_partial_match, getWebJump, web_jump)
	(get_url_or_webjump, exchange_point_and_mark, get_link_text)
	(universal_digit, universal_argument_more, univ_arg_to_number)
	(link_menu, scrolly_document_observer, toggle_eod_space)
	(mode_line_mode): whitespace

	* commands.js (isearch_forward, isearch_backward): use
	conkeror.isearch_active.

	* commands.js (meta_x): use conkeror.commands.

	* commands.js (meta_x, eval_expression): use
	this.readFromMiniBuffer.

	* commands.js (meta_x): use call_interactively.call.

	* commands.js (meta_x): use this.abort.

	* commands.js (goDoCommand): use this.top.

	* commands.js (cmd_beginLine, cmd_copy, cmd_copyOrDelete, cmd_cut)
	(cmd_cutOrDelete, cmd_deleteToBeginningOfLine)
	(cmd_deleteToEndOfLine, cmd_endLine, cmd_moveTop, cmd_moveBottom)
	(cmd_selectAll, cmd_selectBeginLine, cmd_selectBottom)
	(cmd_selectEndLine, cmd_selectTop, cmd_scrollBeginLine)
	(cmd_scrollEndLine): removed functions. rewrote interactive
	definition to call goDoCommand directly.

	* commands.js (doCommandNTimes): use goDoCommand.call.

	* commands.js (cmd_charNext, cmd_charPrevious)
	(cmd_deleteCharBackward, cmd_deleteCharForward)
	(cmd_deleteWordBackward, cmd_deleteWordForward, cmd_lineNext)
	(cmd_linePrevious, cmd_movePageDown, cmd_movePageUp, cmd_redo)
	(cmd_selectCharNext, cmd_selectCharPrevious, cmd_selectLineNext)
	(cmd_selectLinePrevious, cmd_selectPageDown, cmd_selectPageUp)
	(cmd_selectWordNext, cmd_selectWordPrevious, cmd_undo)
	(cmd_wordNext, cmd_wordPrevious, cmd_scrollPageUp)
	(cmd_scrollPageDown, cmd_scrollLineUp, cmd_scrollLineDown)
	(cmd_scrollLeft, cmd_scrollRight, cmd_paste): removed functions.
	redefined interactive commands to directly call doCommandNTimes.

	* commands.js (get_link_location): moved to utils.js.

	* commands.js (source, reinit): use load_rc.

	* commands.js (go_up): use open_url_in.call.

	* commands.js (text_reset, text_reduce, text_enlarge): remove call
	to numberedlinks_resize.

	* commands.js (use_vi_keys): use conkeror.initViKmaps.

	* commands.js (use_emacs_keys): use conkeror.initKmaps.

	* commands.js (renumber_links): use this.removeExistingNLs.

	* commands.js (renumber_links): use this.createNumberedLinks.call.

	* commands.js (exit_minibuffer, minibuffer_history_next)
	(minibuffer_history_previous, minibuffer_abort)
	(minibuffer_complete, minibuffer_accept_match)
	(minibuffer_complete_reverse, minibuffer_change)
	(minibuffer_backspace): move to minibuffer.js.

	* commands.js (view_source): use dumpln instead of alert.

	* utils.js (gBrowser, message, minibuffer, readKeyPress)
	(make_default_filename_to_save_url, abs_point, getAccessibility)
	(getBrowser, getWebNavigation, getMarkupDocumentViewer)
	(read_from_minibuffer_internal, gHistory)
	(minibuffer_history_max_items, getHistory, initHistory)
	(addHistory, init_minibuffer, miniBufferCompleteStr)
	(removeWhiteSpace, findCompleteMatch, setInputValue)
	(readFromMiniBuffer, setFocus, closeInput, gModeLineMode)
	(showModeLine, updateModeLine, readFromClipboard, clearMessage)
	(gKeySeq, gKeyTimeout, gCommandLastEvent, addKeyPressHelpTimeout)
	(formatMods, formatKey, copyEvent, zip2, abort, makeURL)
	(makeFileURL, get_document_content_disposition, download_uri)
	(download_uri_internal, make_default_file_name_to_save_url)
	(add_stringbundle): moved to frame.js.

	* utils.js (default_directory, set_default_directory, load_rc):
	moved to application.js.

	* utils.js (copy_img_location, titleFormatter): removed.

	* utils.js (metaPressed, keyMatch, getKeyBinding, getMods): moved
	to keyboard.js.

	* frame.js (minibuffer.oninput): use
	conkeror.call_interactively.call.

	* utils.js (gCurrentKmap): removed and changed all references to
	conkeror.current_kmap.

	* frame.js (readKeyPress): overlay_kmap changed to
	conkeror.overlay_kmap.  top_kmap changed to conkeror.top_kmap.
	context_kmaps changed to conkeror.context_kmaps.  use
	conkeror.getKeyBinding.  use conkeror.call_interactively.call.
	use conkeror.keyMatch.  use conkeror.abort_key.

	* utils.js (goDoCommand): moved to commands.js.

	* utils.js (fopen, LocalFile): moved to localfile.js.

	* frame.js (make_default_filename_to_save_url): use
	conkeror.default_directory.

	* frame.js (dumpln): moved to debug.js.

2007-10-19  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.28

	* debug.js: new file.

	* localfile.js: new file.

	* utils.js (dumpln): removed.

	* utils.js (load_rc): removed.

	* conkeror.js (Startup): do not load rc anymore.  rewrote
	window.arguments handling.

	* commands.js (reinit, source): use conkeror.load_rc.

2007-10-17  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.27

	* conkeror.js (conkeror_version): removed variable.

	* conkeror.js (gPrefService): removed variable and updated
	references.

	* commands.js (show_conkeror_version): update reference.

	* commands.js (interactive_methods.pref): updated to use
	conkeror.preferences.

2007-10-17  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.25

	* commands.js (interactive_methods): removed duplicated definition
	of minibuffer_exit.

2007-08-24  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.24

	* conkeror.xml: use getElementsByTagNameNS instead of getElementsByTagName.

	* conkeror.xml: remove spurious `}' characters from several places.

	* bindings.js: use DOM_VK_BACK_SPACE instead of DOM_VK_BACK.

2007-08-23  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.23

	* conkeror.js: new way to set conkeror object.

	* conkeror.js: do not set conkeror_id.

	* conkeror.js (Startup): uriToLoad defaults to null, and only load
	an url if one is explicitly passed in.

	* commands.js (interactive_methods.current_frameset_frame_url_s)
	(interactive_methods.current_url_o, interactive_methods.s): new
	methods.

	* commands.js (interactive_methods.M): removed.

	* commands.js (call_interactively): object scope of interactive
	calls is now the conkeror object.

	* commands.js (next_frameset_frame): support nested frames.

	* commands.js (open_url_in): use conkeror object to make new
	buffer.

	* commands.js (open-frameset-frame-in-current-buffer)
	(open-frameset-frame-in-new-buffer)
	(open-frameset-frame-in-new-frame, copy-frameset-frame-location):
	new commands.

	* commands.js (copyCurrentUrl, copy_link_location): removed
	functions.

	* commands.js (copy_location): new function.

	* commands.js (copy-current-url, copy-link-location)
	(copy-image-location): redefined in terms of copy_location.

	* bindings.js (initKmaps): binding for text-reset.

	* bindings.js (init_frameset_keys): bindings for
	open-frameset-frame-in-current-buffer,
	open-frameset-frame-in-new-buffer,
	open-frameset-frame-in-new-frame, copy-frameset-frame-location.

	* daemon-mode.js: new file.

	* context.js (context_methods): copy_frameset_frame_location

	* utils.js (getMods): fixed bug concerning ctrl and alt being
	pressed at the same time.

2007-06-25  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.22

	* commands.js (list_buffers): use A element to get numberedlinks
	effect.

2007-06-23  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.21

	* commands.js (interactive_methods.url_or_webjump): error on empty
	minibuffer read.

	* commands.js (call_interactively): message on error.

	* commands.js (list_buffers): items in buffer list can be clicked.

	* commands.js (list_all_buffers): now in inner function of
	list_buffers.

	* commands.js (exit_minibuffer): no longer catch errors.

	* commands.js (view_source): check if already viewing source.

	* utils.js (set_default_directory): check environment variables
	present on Win32 platform.

2007-06-19  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.20

	* commands.js (next_frameset_frame): message instead of notify on
	error.  scrollIntoView focused frame.

	* commands.js (next_iframe): message instead of notify on error.
	skip hidden iframes.

	* conkeror.xul (frameset-notification-label): description element.

2007-06-18  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.19

	* bindings.js (frameset_kmap, init_frameset_keys): new.  bound `f'
	to frameset_kmap.

	* bindings.js (init_universal_arg_keys): binding for
	universal-negate.

	* commands.js (nextFrame): removed function and command.

	* commands.js (notification_timer, next_frameset_frame,
	next_iframe): new global, functions, and commands.

	* commands.js (follow-link): new command.

	* commands.js (universal_digit): accomodate negatives.

	* commands.js (universal_negate): new function and command.

	* conkeror.xul (frameset-notification): new popup element.

2007-06-17  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.18

	* commands.js (follow-link-in-new-buffer): new command

	* bindings.js: top_kmap binding for follow-link-in-new-buffer.

2007-05-21  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.17

	* commands.js (interactive_methods): prompt specs are now expected
	to be functions.  update interactive_methods and interactive
	declarations throughout program.

	* commands.js (interactive_methods): new methods, url_or_webjump and value.

	* commands.js (new_frame, find_alt_url, open_url, find_url):
	removed.

	* commands.js (find-url-other-frame, open-url, find-alternate-url,
	find-url): rewrote in terms of open_url_in.

	* gui_context_menu.s (add_contextmenu_submenu): fixed call to
	add_submenu.

2007-05-20  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.16

	* commands.js (save_page, save_image, save_page_as_text): do not bypass cache.

	* context.js: new file

	* dom-utils.js: new file

	* gui_context_menu.js: new file

	* gui_context_menu.xul: new file

	* bindings.js: added binding for save-page.

	* commands.js (interactive_methods): new methods, content_charset,
	content_selection, current_url_s, image_url_s, mathml_node.

	* commands.js (follow-image): command now defined in terms of
	open_url_in.

	* commands.js (init_webjumps): added conkerorwiki webjump.

	* commands.js (copy-image-location): defined in terms of
	copy_link_location.

	* commands.js (copy_email_address, view_partial_source,
	view_mathml_source): new functions and corresponding commands.

	* conkeror.xul: new stringbundleset, and script element for dom-utils.js.

	* utils.js (goDoCommand): message on failure.

	* utils.js (initBookmarkService, add_bookmark): removed.

	* utils.js (add_stringbundle): new.

	* utils.js (commandline_flags, commandline_handler):
	removed (commented for now).

2007-05-15  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.15

	* utils.js (titleFormatter): new global.

	* utils.js (default_title_formatter, set_window_title): new
	functions.

	* conkeror.js (conkeror, conkeror_id): new globals.

	* conkeror.js (Startup): default page is now about:blank.

	* conkeror.js (Startup): accept an url as a single argument.

	* conkeror.js (Startup): load rc here. call set_window_title.

	* conkeror.js (delayedStartup): set_window_title at
	DOMContentLoaded.

	* conkeror.js (delayedStartup): remove loading rc.

	* conkeror.js (nsBrowserStatusHandler.onLocationChange):
	set_window_title.

	* conkeror.xul: contenttitlesetting is now false.

	* commands.js (quit, extensions, makeFrame, open_url_in): updated
	to use app-scope.

	* commands.js (customize, preferences): removed commands.

2007-05-11  John J. Foerch  <jjfoerch@earthlink.net>

	* VERSION: 0.42.14

	* bindings.js (init_numberedlinks_keys): bind C-s to
	numberedlinks-save.

	* bindings.js: bind minibuffer-accept-match to space

	* commands.js: new command minibuffer-accept-match.

	* commands.js (exec_command): renamed to call_interactively.
	updated all callers.

	* commands.js (call_interactively): new argument, given_args.

	* commands.js (do_interactive): new argument, given_args.

	* commands.js (interactive_methods): initval functions now take as
	an argument the interactive values collected so far.

	* commands.js (interactive_methods.F, .focused_link_url_o,
	.focused_link_url_s): new methods

	* commands.js (get_link_location): takes arg instead of performing
	side-effect.

	* commands.js (copy_link_location): uses interactive
	focused_link_url_s now.

	* commands.js (save_link, save-link): removed.

	* commands.js (save_focused_link): new command.

	* commands.js (firefox): removed.

	* commands.js (exit_minibuffer): interactive spec now includes
	current-command.

	* bm.js, bookmarks.html: removed files.

	* commands.js (goto_bookmark, bookmark_current_url, bookmark_doc,
	bookmark_bmenu_list): removed.

	* bindings.js: removed bookmarks keys.

	* bindings.js (input_kmap_predicate): test for buttons.

	* bindings.js (minibuffer_kmap_predicate, textarea_kmap_predicate,
	input_kmap_predicate): always return a value.

	* bindings.js (init_numberedlinks_keys): change binding for
	numberedlinks-follow-other-frame to C-M-RET.

	* numberedlinks.js (numberedlinks_do_link): call save-focused-link
	instead of save-link.  updated interactive defs so initval is a
	function.

	* numberedlinks.js (numberedlinks_exit_minibuffer): removed.
	updated interactive defs to call exit_minibuffer.

	* commands.js (get_buffer_from_name, getWebJump,
	univ_arg_to_number): always return a value.

	* numberedlinks.js (get_numberedlink_in_document,
	get_numberedlink, doLinkNodes): always return a value.

	* numberedlinks.js (continueNumberedLinks): rename second var
	nodes to newnodes.

	* find.js (getFastFind, highlightFind): always return a value.

	* bindings.js (match_any_unmodified_key): always return a value.

	* utils.js (load_rc): declare i.

	* commands.js (source_file, reinit): removed named functions, and
	updated interactive spec for `source' and `reinit' commands.

	* commands.js (interactive_methods.n): corrected wrong variable name.

	* commands.js (save_page, save_page_as_text, save_page_complete,
	save_image): rewrote to use interactive.

	* commands.js (interactive_methods.active_document): new.

2007-05-10  John J. Foerch  <jjfoerch@earthlink.net>

	* adblock.js: removed file.

	* commands.js: removed adblock_add_pattern and adblock_list_patterns.

	* conkeror.js: handle an url passed by command line argument.

	* conkeror.xul: remove load of adblock.js.

	* utils.js (readKeyPress): replace preventBubble call with
	stopPropagation.

	* url.js: replace preventBubble call with
	stopPropagation.

2007-05-10  John J. Foerch  <jjfoerch@earthlink.net>

	* bindings.js (init_numberedlinks_keys): added bindings for
	numberedlinks-save and numberedlinks-follow-other-frame.  removed
	bindings for numberedlinks-escape.

	* commands.js (interactive_methods.current_command): new
	interactive method, along with global gCurrentCommand, and update
	to exec_command to set the global.

	* commands.js (interactive_methods.link): new interactive method.

	* commands.js (interactive_methods.minibuffer_exit): new
	interactive method.

	* commands.js (save_link): new argument, `href'.

	* commands.js (exit_minibuffer): new argument, `exit'.  message
	instead of alert in catch.

	* numberedlinks.js: removed gNumberedLinksPrefix,
	selectNumberedLink_*, selectNthLink, goto_numbered_link,
	selectNumberedLink, closeNumberedLinkBar, numberedlinks_focus,
	numberedlinks_follow_other_buffer, numberedlinks_follow,
	numberedlinks_escape.

	* numberedlinks.js (numberedlinks_do_link): new (interactive)
	argument, `prefix'.  Message when nl not found.  Changed action
	numbers to string names.  Added handling for
	numbered-links-follow-other-frame, numberedlinks-save.  Removed
	numbered image handling.  Added interactive definintions for this
	function.

	* numberedlinks.js (numberedlinks_exit_minibuffer): new function
	with several interactive commands to call it.

	* utils.js (minibuffer.exit): new field.

2007-03-11  John J. Foerch  <jjfoerch@earthlink.net>

	* components/commandline.js: general improvements

	* conkeror.js (Startup): handle new command line component.

	* utils.js (commandline_handler): new function

2007-03-09  John J. Foerch  <jjfoerch@earthlink.net>

	* utils.js (dumpln): new function

	* utils.js (load_rc): new function, replaces load_rc_file

	* commands.js (source_file): updated to call load_rc

	* commands.js (reinit): new command

	* conkeror.js (Startup): updated to call load_rc

	* components/commandline.js: new file

	* build.sh (install-debian): new target

2007-03-06  John J. Foerch  <jjfoerch@earthlink.net>

	* build.sh: build rule xulrunner and support code.

	* chrome.manifest: new file.

	* conkeror.ini: new file.

	* conkeror.js: comment out initBookmarkService.  comment out
	window.arguments support.

	* conkeror.xul: comment out bookmark stuff.

	* defaults/preferences/prefs.js: new file.

2007-03-04  John J. Foerch  <jjfoerch@earthlink.net>

	* conkeror.xul: removed bubble-phase keypress handler.

	* conkeror.js: capture phase keypress handler.

2007-03-02  Shawn Betts  <sabetts@vcn.bc.ca>

	* commands.js: swap names of minibuffer_history_next and minibuffer_history_previous

	* bindings.js: bind C-l to renumber-links.

	* conkeror.js: create numbered links on DOMContentLoaded event.

	* commands.js: work with new numbering code

	* numberedlinks.js: use top level content to store numbered link
	start number. only number documents not already numbered. add
	in-progress numbering state. nl_document_observer only updates
	floater number locations.

2007-02-27  John J. Foerch  <jjfoerch@earthlink.net>

	* bindings.js (make_key): renamed to kbd.

	* bindings.js: changed all calls to make_key.

	* help.html: changed make_key to kbd.

2007-02-27  John J. Foerch  <jjfoerch@earthlink.net>

	* utils.js (minibuffer): new object replaces globals:
	gFocusedElement, gFocusedWindow, gReadFromMinibufferCallBack,
	gReadFromMinibufferAbortCallBack, gMiniBufferCompletions,
	gCurrentCompletion, gCurrentCompletions, gDefaultMatch,
	gAllowNonMatches, gHistoryPoint, and gHistoryArray.

	* utils.js (init_minibuffer): new function.

	* conkeror.js (delayedStartup): call init_minibuffer.

	* utils.js, commands.js: implemented minibuffer object.

	* find.js, numberedlinks.js, bindings.js, url.js: implemented
	minibuffer object.

	* bindings.js (init_minibuffer_keys): binding for backspace.

	* commands.js (interactive_methods): implemented method `b'.

	* commands.js (switch_to_buffer): use interactive method `b'.

	* commands.js (kill_browser): renamed to kill_buffer, and use
	interactive method `b'.

	* commands.js (minibuffer_complete): implement new completion.

	* commands.js (minibuffer_complete_reverse): implement new
	completion.

	* commands.js (minibuffer_change): new command for completion.

	* commands.js (minibuffer_backspace): new command for completion.

	* conkeror.xul (input-field): added oninput event.

	* utils.js (readFromMiniBuffer): implemented new completion.

	* utils.js (readKeyPress): a binding can now have both a
	fallthrough and a command.

2007-02-27  John J. Foerch  <jjfoerch@earthlink.net>

	* commands.js (conkeror-version): new command

2007-02-27  John J. Foerch  <jjfoerch@earthlink.net>

	* bindings.js: rename goto-numbered-image to
	copy-numbered-image-location

	* commands.js: rename interactive to do_interactive, and rewrote
	it to support asynchronous interaction, and `interactive_methods'
	structure.  rename add_command to interactive, and place
	interactive calls next to the function that each is relevant to.
	removed init_commands.  added interactive method, `image'.
	rewrote exec_command to support asynchronous interactivity.
	updated the args of many commands to new style.  new command
	save-image (save_image).

	* conkeror.js: removed call to init_commands

	* conkeror.xul: swap order of numberedlinks.js and commands.js.

	* numberedlinks.js: remove variable gOnlyImages.  update args of
	commands.  rename goto_numbered_image to
	copy_numbered_image_location, and rewrote.  removed image
	capabilities from selectNumberedLink.  renamed matchLink to
	get_numberedlink_in_document and rewrote to move out side-effect
	code.  new function get_numberedlink.  rewrote
	numberedlinks_do_link to perform side-effects formerly in
	matchLink.

2007-02-22  Shawn Betts  <sabetts@shitbender.gagrod>

	* conkeror.js: add conkeror_version 

2007-02-13  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js: restructure minibuffer key events

	* numberedlinks.js: use readFromMiniBuffer. function renaming.

	* commands.js: add minibuffer and isearch commands and
	corresponding functions. Use readFromMiniBuffer.

	* bindings.js: add context maps. keymap restructuring. All callers updated.

2007-01-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.42

2007-01-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* numberedlinks.js: click the image if a link has an image in it.

2007-01-23  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.41

2007-01-23  Shawn Betts  <sabetts@vcn.bc.ca>

	* conkeror.js: remove keypress listener on the window.

2006-12-15  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.40

2006-12-15  Shawn Betts  <sabetts@vcn.bc.ca>

	* bindings.js: fix next/prev word bindings in textarea_map

	* utils.js: Support code for url downloading

	* conkeror.js (delayedStartup): set the default directory

	* commands.js: new commands save-page, save-page-as-text, save-page-complete. fixed save-link.

2006-12-01  Shawn Betts  <sabetts@shitbender.gagrod>

	* commands.js (open_url_in): return the browser

2006-11-30  Shawn Betts  <sabetts@shitbender.gagrod>

	* Release 0.39

2006-11-30  Shawn Betts  <sabetts@shitbender.gagrod>

	* conkeror.xul: listen for keypresses on the window

2006-11-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.38

2006-11-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js: use the input keymap for any input that isn't a radio or checkbox

	* bindings.js: create a numberedlinks_kmap and bind numberedlinks
	function to it.

	* numberedlinks.js: check numberedlinks_kmap for key bindings.

2006-11-07  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.37

2006-10-19  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js: let regular keys slip through for input tags of type "input"

2006-10-03  Shawn Betts  <sabetts@vcn.bc.ca>

	* conkeror.js: set the first browser's link and image visibility

	* conkeror.xml: set the link and image numbers state based on
	default_show_numbered_links and default_show_numbered_images

	* numberedlinks.js: add default_show_numbered_links and default_show_numbered_images

2006-09-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.34

2006-09-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* numberedlinks.js (global_numbered_links_mode): new global variable

	* conkeror.js (delayedStartup): init web jumps before rc file

	* commands.js: turn on everything for the new window in the firefox
	command.

2006-06-11  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.33

2006-05-31  Shawn Betts  <sabetts@vcn.bc.ca>

	* commands.js add jsconsole command. add firefox command.

2006-05-30  Shawn Betts  <sabetts@vcn.bc.ca>

	* commands.js: add cmd_deleteWordForward

	* utils.js (readKeyPress): add type "search"

2006-05-29  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.32

2006-05-29  Shawn Betts  <sabetts@vcn.bc.ca>

	* commands.js: web jumps work with or without an argument

2006-04-29  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.31

2006-04-29  Shawn Betts  <sabetts@vcn.bc.ca>

	* conkeror.xml : fix blank screen bug

	* commands.js (renumber_links): mark the document as unmarked
	before recreating the links.

	* numberedlinks.js: tag documents as numbered and only number
	untagged documents.

2006-04-21  Shawn Betts  <sabetts@vcn.bc.ca>

	* commands.js (add_command): fix typo

2006-04-15  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js: correct the gReadFromMinibufferCallAbortBack typo.

2006-04-06  Shawn Betts  <sabetts@vcn.bc.ca>

	* bm.js: return bookmarks from subfolders.

2006-04-04  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.30

	* conkeror.js (delayedStartup): turn off accesskeys.

	* bindings.js (initViKmaps): remove split-window related keybindings
	(initKmaps): likewise

	* conkeror.xml (killBrowser): focus the new browser before
	deleting the old one.

	* numberedlinks.js (setNumberedLinksVisibility): take a content argument. callers updated
	(nl_document_observer): dont call setNumberedLinksVisibility

2006-04-02  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.29

	* numberedlinks.js (createNL): properly decide when to hide the
	link and when not to.

	* Release 0.28

2006-04-02  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js (readInput): set the collapsed field for widgets.
	(miniBufferKeyPress): eat the event when its RET
	(miniBufferCompleteKeyPress): likewise
	(closeInput): set the collapsed field for widgets. only take a
	restoreFocus arg. all callers updated.

	* conkeror.xul: use collapsed not hidden

2006-03-28  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.27

2006-03-28  Shawn Betts  <sabetts@vcn.bc.ca>

	* conkeror.xml: load about:blank by default in new browsers. dont
	use a timeout to load the url.

	* conkeror.js: handle -remote urls

2006-03-28  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.26

2006-03-28  Shawn Betts  <sabetts@vcn.bc.ca>

	* commands.js: fix unfocus so it actually works.

	* conkeror.xul: make screenX screenY width height sizemode persistent

	* conkeror.xml: use a deck instead of a box. fix focus typo
	bug. remove all split related functions.
	(getBrowserIndex): new method

	* conkeror.js (Startup): give window a default size if it doesn't
	have one already. fix loaduri bug.

	* commands.js: remove commands switch-to-buffer-other-window,
	split-flip delete-other-windows, delete-window, other-window and
	split-window. remove corresponding js functions

2006-03-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.24

2006-03-26  Shawn Betts  <sabetts@vcn.bc.ca>

	* numberedlinks.js: asynchronously number links. asynchronously update floating links.

	* conkeror.js (delayedStartup): add frame_focus_observer to page-end-load
	(top_content): new function
	(nsBrowserStatusHandler): properly handle when frames are loaded

	* commands.js (init_commands): 2 new commands renumber-links and extensions
	(customize): use preferences.xul
	(extensions): new function
	(renumber_links): likewise

	* bindings.js (initViKmaps): new binding to textarea_kmap yank-to-clipboard.

2006-03-25  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.23

2006-03-25  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js (readinput): fix the field focus bug.

	* commands.js (init_commands): new command print-buffer
	(print_buffer): new function
	(add_command): replace existing commands.

2006-03-17  Shawn Betts  <sabetts@vcn.bc.ca>

	* Release 0.22

2006-03-17  Shawn Betts  <sabetts@vcn.bc.ca>

	* utils.js (http): delay focusing the input box by setting a 0s
	timeout.

	* conkeror.js (Startup): do not set the docshell.

	* commands.js: use app-startup to quit conkeror.

